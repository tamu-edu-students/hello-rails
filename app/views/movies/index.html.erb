<p style="color: green"><%= notice %></p>

<% content_for :title, "Movies" %>

<h1>Movies</h1>

<table id="movies">
  <thead>
    <tr>
      <th class="<%= 'sorted ' + (session[:sort_column] == 'title' ? 'sorted-' + session[:sort_direction] : '') %>">
        <%= link_to 'Title', movies_path(sort: 'title', direction: (params[:direction] == 'asc' ? 'desc' : 'asc')) %>
      </th>
      <th class="<%= 'sorted ' + (session[:sort_column] == 'rating' ? 'sorted-' + session[:sort_direction] : '') %>">
        <%= link_to 'Rating', movies_path(sort: 'rating', direction: (params[:direction] == 'asc' ? 'desc' : 'asc')) %>
      </th>
      <th class="<%= 'sorted ' + (session[:sort_column] == 'release_date' ? 'sorted-' + session[:sort_direction] : '') %>">
        <%= link_to 'Release Date', movies_path(sort: 'release_date', direction: (params[:direction] == 'asc' ? 'desc' : 'asc')) %>
      </th>
    </tr>
  </thead>
  <% @movies.each do |movie| %>
    <%= render movie %>
  <% end %>
</table>
  
<%= link_to "New movie", new_movie_path %>